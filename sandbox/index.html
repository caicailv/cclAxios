<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
  </head>
  <body>
    <script type="module">
      // import axios from '../dist/axios.js'
      ;(async function () {
        function loadJs() {
          var oHead = document.getElementsByTagName('head')[0] // 在head标签中创建创建script
          var oScript = document.createElement('script')
          oScript.type = 'text/javascript'
          oScript.src = '/axios.min.js'
          oScript.defer = true
          oHead.appendChild(oScript)
          console.error('正在使用官方版axios')
        }
        const pTime = (time) =>
          new Promise((resolve) => {
            setTimeout(resolve, time)
          })
        loadJs()
        await pTime(500)
        axios.interceptors.request.use(
          (config) => {
            console.log('config', config)
            return config
          },
          (err) => {
            console.log(err)
          }
        )
        axios.interceptors.response.use(
          (res) => {
            console.log('response', res)
            return res
          },
          (err) => {
            console.error(err)
          }
        )
     

 
        // for (const key in axios) {
        //   console.log('key', key)
        // }
        // const ax = axios.create({
        //   headers: { ttt: '222' },
        // })
        // await pTime(500)
        const res = await axios.get('/api', {}).catch((err) => {
          console.log('err', err)
        })

        console.log(res)
      })()
    </script>
  </body>
</html>
